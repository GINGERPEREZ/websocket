# =============================================================================
# MesaYA WebSocket Service (Go) - Docker Compose
# =============================================================================
# IMPORTANTE: Ejecutar primero el docker-compose.yml de la ra√≠z del proyecto
# para levantar Kafka antes de este servicio.
#
# Uso:
#   cd ../ && docker compose up -d   # Levantar Kafka primero
#   docker compose up -d             # Luego levantar este servicio
# =============================================================================

services:
  websocket:
    build:
      context: .
      dockerfile: dockerfile
    container_name: mesaya-websocket
    environment:
      KAFKA_BROKERS: kafka:9092
      SERVER_PORT: 8080
      JWT_SECRET: ${JWT_SECRET}
      LOG_LEVEL: info
    ports:
      - "8080:8080"
    volumes:
      - ./logs:/srv/logs
    networks:
      - mesaya-network
    restart: unless-stopped

# Conectar a la red compartida de infraestructura
networks:
  mesaya-network:
    external: true
    name: mesaya-network
