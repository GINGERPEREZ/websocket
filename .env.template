# Environment template for mesa-ya-ws
# Copy this file to .env and fill the values for your environment.

# Server port for the Go WS service
PORT=8080

# JWT configuration for validating tokens from Nest auth service.
# For RS256 (recommended), set JWT_PUBLIC_KEY with the PEM-encoded public key.
# For HS256 (legacy), set JWT_SECRET with the shared secret.
# If both are set, RS256 with public key takes precedence.
JWT_SECRET=changeme
JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIIBIjANBg...\n-----END PUBLIC KEY-----"

# Logging options (level: debug|info|warn|error, format: json|text)
LOG_LEVEL=info
LOG_FORMAT=text

# Base URL for the Nest REST API used to fetch section snapshots
REST_BASE_URL=http://localhost:3000

# Optional: override the REST client timeout (supports Go duration format, e.g. 15s)
REST_TIMEOUT=10s

# Kafka brokers (comma separated). Example: localhost:29092 or kafka:9092
KAFKA_BROKERS=localhost:29092

# Optional: Kafka consumer group
KAFKA_GROUP_ID=mesa-ya-consumers

# Optional: comma-separated list of entity->topic mappings. You can map an entity to multiple
# Kafka topics by separating them with the pipe character (|).
# Ex: WS_ENTITY_TOPICS=restaurants:mesa-ya.restaurants.created|mesa-ya.restaurants.updated,
#     reservations:mesa-ya.reservations.created|mesa-ya.reservations.updated
WS_ENTITY_TOPICS=reviews:mesa-ya.reviews.created|mesa-ya.reviews.updated|mesa-ya.reviews.deleted,restaurants:mesa-ya.restaurants.created|mesa-ya.restaurants.updated|mesa-ya.restaurants.deleted,sections:mesa-ya.sections.created|mesa-ya.sections.updated|mesa-ya.sections.deleted,tables:mesa-ya.tables.created|mesa-ya.tables.updated|mesa-ya.tables.deleted,objects:mesa-ya.objects.created|mesa-ya.objects.updated|mesa-ya.objects.deleted,section-objects:mesa-ya.section-objects.created|mesa-ya.section-objects.updated|mesa-ya.section-objects.deleted,menus:mesa-ya.menus.created|mesa-ya.menus.updated|mesa-ya.menus.deleted,dishes:mesa-ya.dishes.created|mesa-ya.dishes.updated|mesa-ya.dishes.deleted,images:mesa-ya.images.created|mesa-ya.images.updated|mesa-ya.images.deleted,reservations:mesa-ya.reservations.created|mesa-ya.reservations.updated|mesa-ya.reservations.deleted,payments:mesa-ya.payments.created|mesa-ya.payments.updated|mesa-ya.payments.deleted,subscriptions:mesa-ya.subscriptions.created|mesa-ya.subscriptions.updated|mesa-ya.subscriptions.deleted,subscription-plans:mesa-ya.subscription-plans.created|mesa-ya.subscription-plans.updated|mesa-ya.subscription-plans.deleted,auth-users:mesa-ya.auth.user-signed-up|mesa-ya.auth.user-logged-in|mesa-ya.auth.user-roles-updated|mesa-ya.auth.role-permissions-updated

# Allowed realtime actions (commonly created,updated,deleted,snapshot)
WS_ALLOWED_ACTIONS=created,updated,deleted,snapshot

# Default websocket entity namespace exposed via /ws/restaurant route
WS_DEFAULT_ENTITY=restaurants
